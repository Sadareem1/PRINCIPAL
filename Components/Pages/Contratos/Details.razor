@page "/contratos/{Id:int}"
@attribute [Authorize(Policy = "SoloLectura")]
@inject IContratosService ContratosService

<h1>Detalle de contrato</h1>

@if (Modelo is null)
{
    <p>Cargando...</p>
}
else
{
    <dl>
        <dt>NÃºmero</dt>
        <dd>@Modelo.NumeroContrato</dd>
        <dt>Proveedor</dt>
        <dd>@Modelo.Proveedor</dd>
        <dt>Activo</dt>
        <dd>@Modelo.Activo?.CodigoInventario</dd>
        <dt>Vigencia</dt>
        <dd>@Modelo.FechaInicio:dd/MM/yyyy - @Modelo.FechaFin:dd/MM/yyyy</dd>
    </dl>

    <AuthorizeView Roles="Administrador,Tecnico">
        <a class="btn btn-primary" href="/contratos/descargar/@Modelo.Id">Descargar PDF</a>
    </AuthorizeView>
}

@code {
    [Parameter] public int Id { get; set; }
    private Contrato? Modelo { get; set; }

    protected override async Task OnInitializedAsync()
    {
        Modelo = await ContratosService.ObtenerPorIdAsync(Id);
    }
}
